<!doctype html><html dir=ltr lang=en data-theme=dark class="html theme--dark"><head><title>Booting DietPi from SSD on a Raspberry Pi 4B 8GB |
Naty S
</title><meta charset=utf-8><meta name=generator content="Hugo 0.124.1"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="Naty S"><meta name=description content="Documenting my homelab journey;
amongst other techy enlightenments.
"><link rel=stylesheet href=/scss/main.min.4bda5a93afa4898fbf616fc54753f72d4c04daa415bfd97508e74758d4494f3d.css integrity="sha256-S9pak6+kiY+/YW/FR1P3LUwE2qQVv9l1COdHWNRJTz0=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.73ccfdf28df555e11009c13c20ced067af3cb021504cba43644c705930428b00.css integrity="sha256-c8z98o31VeEQCcE8IM7QZ688sCFQTLpDZExwWTBCiwA=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/syntax.min.ac211aaef6fdedc1e8de20e8867d9966aff2bbf340de0087b8ba00f97e234877.css integrity="sha256-rCEarvb97cHo3iDohn2ZZq/yu/NA3gCHuLoA+X4jSHc=" crossorigin=anonymous media=screen><link rel=stylesheet href=/fontawesome/css/fontawesome.min.7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f.css integrity="sha256-fSct41tBD7FlN3VQzfnE06gPu8yWHhEZFOTVwOr1cp8=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.55d8333481b07a08e07cf6f37319753a2b47e99f4c395394c5747b48b495aa9b.css integrity="sha256-VdgzNIGwegjgfPbzcxl1OitH6Z9MOVOUxXR7SLSVqps=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/regular.min.a7448d02590b43449364b6b5922ed9af5410abb4de4238412a830316dedb850b.css integrity="sha256-p0SNAlkLQ0STZLa1ki7Zr1QQq7TeQjhBKoMDFt7bhQs=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.9ed75a5d670c953fe4df935937674b4646f92674367e9e66eb995bb04e821647.css integrity="sha256-ntdaXWcMlT/k35NZN2dLRkb5JnQ2fp5m65lbsE6CFkc=" crossorigin=anonymous type=text/css><link rel="shortcut icon" href=/favicons/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.png><link rel=canonical href=https://www.burgeonlab.com/posts/2023/dietpi-on-ssd/><script type=text/javascript src=/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Booting DietPi from SSD on a Raspberry Pi 4B 8GB"><meta name=twitter:description content="Setting up DietPi on a headless Raspberry Pi 4B 8GB Using Balena Etcher on macOS, I flashed a copy of the Raspberry Pi 2/3/4 DietPi image onto a Kingston 128GB Canvas Go Plus microSD card."><meta property="og:title" content="Booting DietPi from SSD on a Raspberry Pi 4B 8GB"><meta property="og:description" content="Setting up DietPi on a headless Raspberry Pi 4B 8GB Using Balena Etcher on macOS, I flashed a copy of the Raspberry Pi 2/3/4 DietPi image onto a Kingston 128GB Canvas Go Plus microSD card."><meta property="og:type" content="article"><meta property="og:url" content="https://www.burgeonlab.com/posts/2023/dietpi-on-ssd/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-01T20:35:10+08:00"><meta property="article:modified_time" content="2024-03-30T17:48:14+08:00"><meta property="og:site_name" content="Burgeon Lab"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Booting DietPi from SSD on a Raspberry Pi 4B 8GB","headline":"Booting DietPi from SSD on a Raspberry Pi 4B 8GB","alternativeHeadline":"","description":"
      
        Setting up DietPi on a headless Raspberry Pi 4B 8GB Using Balena Etcher on macOS, I flashed a copy of the Raspberry Pi 2\/3\/4 DietPi image onto a Kingston 128GB Canvas Go Plus microSD card.


      


    ","inLanguage":"en-GB","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.burgeonlab.com\/posts\/2023\/dietpi-on-ssd\/"},"author":{"@type":"Person","name":"Naty S"},"creator":{"@type":"Person","name":"Naty S"},"accountablePerson":{"@type":"Person","name":"Naty S"},"copyrightHolder":{"@type":"Person","name":"Naty S"},"copyrightYear":"2023","dateCreated":"2023-10-01T20:35:10.00Z","datePublished":"2023-10-01T20:35:10.00Z","dateModified":"2024-03-30T17:48:14.00Z","publisher":{"@type":"Organization","name":"Naty S","url":"https://www.burgeonlab.com/","logo":{"@type":"ImageObject","url":"https:\/\/www.burgeonlab.com\/favicons\/favicon-32x32.png","width":"32","height":"32"}},"image":[],"url":"https:\/\/www.burgeonlab.com\/posts\/2023\/dietpi-on-ssd\/","wordCount":"670","genre":[],"keywords":["raspberry pi","dietpi","networking"]}</script></head><body class=body><div class=wrapper><aside class="wrapper__sidebar wrapper__sidebar--hidden"><div class="sidebar
."><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src=/profile.webp alt="profile picture"><div class=sidebar__introduction-title><a href=/>Burgeon Lab</a></div><div class=sidebar__introduction-description><p>Documenting my homelab journey;<br>amongst other techy enlightenments.<br></p></div></div><ul class=sidebar__list><li class=sidebar__list-item><a href=https://www.instagram.com/eclecticpassions target=_blank rel="noopener me" aria-label=Instagram title=Instagram><i class="fab fa-instagram fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://www.github.com/eclecticpassions target=_blank rel="noopener me" aria-label=GitHub title=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://fosstodon.org/@eclecticpassions target=_blank rel="noopener me" aria-label=Mastodon title=Mastodon><i class="fab fa-mastodon fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://www.eclecticpassions.net target=_blank rel="noopener me" aria-label="Main Blog" title="Main Blog"><i class="fab fa-wordpress fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=/posts/index.xml target=_blank rel="noopener me" aria-label=RSS title=RSS><i class="fas fa-rss fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
2023-2024 burgeonlab.com Naty S</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-R0EKGKLJYW"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-R0EKGKLJYW")</script></div></aside><main class="wrapper__main wrapper__main--fullscreen" id=top-anchor><header class=header><div class=.><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu><li class=nav__list-item><a href=/ title>Home</a></li><li class=nav__list-item><a href=/about/ title>About</a></li><li class=nav__list-item><a href=/posts/ title>Posts</a></li><li class=nav__list-item><a href=/series/ title>Series</a></li><li class=nav__list-item><a href=/tags/ title>Tags</a></li></ul><ul class="nav__list nav__list--end"></ul></nav></div></header><div class="post
."><div class=post__content><h1>Booting DietPi From SSD on a Raspberry Pi 4B 8GB</h1><ul class=post__meta><li class=post__meta-item><em class="fas fa-calendar-day post__meta-icon"></em>
<span class=post__meta-text>2023-10-01</span></li><li class=post__meta-item><em class="fas fa-stopwatch post__meta-icon"></em>
<span class=post__meta-text>4-minute read</span></li></ul><style>.toc ul{list-style-type:none;padding-left:20px}.toc ul ul{padding-left:40px}.toc li{position:relative}.toc li:before{content:"";position:absolute;left:30px;top:1em;width:.4em;height:.4em;background-color:#e2e2e2}</style><div class=toc><details><summary><span class=details>Table of Contents</span></summary><nav id=TableOfContents><ul><li><a href=#setting-up-dietpi-on-a-headless-raspberry-pi-4b-8gb>Setting up DietPi on a headless Raspberry Pi 4B 8GB</a><ul><li><a href=#good-ol-ethernet-saves-the-day>Good ol&rsquo; Ethernet saves the day</a></li><li><a href=#not-all-wifi-channels-are-showing>Not all WiFi channels are showing</a></li></ul></li><li><a href=#booting-dietpi-from-external-ssd>Booting DietPi from external SSD</a><ul><li><a href=#using-the-image-backup-script-to-make-an-image>Using the image-backup script to make an image</a></li></ul></li><li><a href=#installing-software>Installing software</a></li></ul></nav></details></div><h2 id=setting-up-dietpi-on-a-headless-raspberry-pi-4b-8gb>Setting up DietPi on a headless Raspberry Pi 4B 8GB</h2><img sizes="(min-width: 35em) 1080px, 100vw" srcset='source srcset="https://www.burgeonlab.com/posts/2023/dietpi-on-ssd/title_huce33f2e11332cf9c86c7f22ec4dd5b12_30354_500x0_resize_q75_h2_box_2.webp 500w"
media="(min-width: 35em)">' src=/posts/2023/dietpi-on-ssd/title.webp alt="ALT TEXT HERE"><p>Using <a href=https://etcher.balena.io/>Balena Etcher</a> on macOS, I flashed a copy of the <a href=https://dietpi.com/#downloadinfo>Raspberry Pi 2/3/4 DietPi</a> image onto a Kingston 128GB Canvas Go Plus microSD card. Went through the default configuration via SSH in a Wi-Fi, headless setup.</p><h3 id=good-ol-ethernet-saves-the-day>Good ol&rsquo; Ethernet saves the day</h3><p>Following the installation <a href=https://dietpi.com/docs/install/>guide</a>, despite enabling WiFi in the the initial one-time-use <code>dietpi.txt</code> and entering my WiFi credentials in <code>dietpi-wifi.txt</code>, I was unable to get the RPi to connect to my network (which meant I couldn&rsquo;t scan for its IP address). I resorted to plugging it into the router with an Ethernet cable; got the IP address of the RPi and turned on WiFi manually in <code>dietpi-config</code> after the first boot. My router is not conveniently accessible, so it was a relief when I could get it to work after the initial setup.</p><h3 id=not-all-wifi-channels-are-showing>Not all WiFi channels are showing</h3><p>If you are having trouble finding the 5Ghz channel of your WiFi connection, ensure the country code is correct. For example, I had HK (Hong Kong) set in the DietPi network locale settings, but it could only detect my 2.4Ghz network. After changing it to CN (China), I was able to see the 5G SSID.</p><h2 id=booting-dietpi-from-external-ssd>Booting DietPi from external SSD</h2><p>I bought a UGREEN USB 3.1 enclosure <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> for my Samsung 870 EVO SATA SSD.</p><img sizes="(min-width: 35em) 1080px, 100vw" srcset='source srcset="https://www.burgeonlab.com/posts/2023/dietpi-on-ssd/enclosure_hu02dd4917b394f354624278be3bf56879_15264_500x0_resize_q75_h2_box_2.webp 500w"
media="(min-width: 35em)">' src=/posts/2023/dietpi-on-ssd/enclosure.webp alt="UGREEN 2.5 inch SATA drive USB Enclosure">
<img sizes="(min-width: 35em) 1080px, 100vw" srcset='source srcset="https://www.burgeonlab.com/posts/2023/dietpi-on-ssd/enclosure_spec_hu0decaaa4abc7f1a45fd0859ee4d8ae8c_28060_500x0_resize_q75_h2_box_2.webp 500w"
media="(min-width: 35em)">' src=/posts/2023/dietpi-on-ssd/enclosure_spec.webp alt="Specification of aluminium usb SSD enclosure"><p>The SSD was previously formatted as ext4 from when I was messing around with antiX and Debian on two old PCs. I had my music library in one of the /home partitions (the other two partitions being a /swap and /boot).</p><p>And here is why it became a bit tricky for me; I couldn&rsquo;t find an easy way to clone the current OS image from the microSD onto the existing /boot partition, delete the /swap and keep the /home so my music files remain untouched.</p><p>I can&rsquo;t read or write ext4 on macOS (ext4fuse didn&rsquo;t work and I didn&rsquo;t want to pay for the Paragon software), so I had to find a way to clone on the Raspberry Pi CLI via SSH. It took me some searching before I found a way to make a backup image of the currently running DietPi OS from the microSD.</p><h3 id=using-the-image-backup-script-to-make-an-image>Using the image-backup script to make an image</h3><p>Originally I was going to use <code>dd</code> to make a copy but I read that it is not good practice to copy a live, working system this way. I eventually used a tool called <code>image-utils</code> found at the <a href="https://forums.raspberrypi.com/viewtopic.php?t=332000">Raspberry Pi forum</a>. Using this <code>image-backup</code> script, a backup of the current system can be made</p><p>I tried flashing the modified DietPi backup image to the /boot partition, preserving the /home partition with my music files, but in the end, all I could do was flash the .img file using Etcher again on my Mac to the SSD, formatting the drive in the process.</p><p>With that out of the way, I shut down the Pi, removed the microSD and plugged in the UGREEN enclosure into one the the USB 3.0 (blue) ports and turned on the Pi. It booted up without any trouble and I called it a day.</p><h2 id=installing-software>Installing software</h2><p>Filled with anticipation, I went ahead and installed some services via the optimized dietpi-software list.</p><img sizes="(min-width: 35em) 1080px, 100vw" srcset='source srcset="https://www.burgeonlab.com/posts/2023/dietpi-on-ssd/dietpi_software_hu8010a8e4f5b36558ccd02d30517d674d_47602_500x0_resize_q75_h2_box_2.webp 500w"
media="(min-width: 35em)">' src=/posts/2023/dietpi-on-ssd/dietpi_software.webp alt="Software to be installed on the DietPi distro for Raspberry Pi 4B"><p>I only have experience with <a href=https://www.navidrome.org/>Navidrome</a> and <a href=https://pi-hole.net/>Pi-hole</a>. Some other self-hosted applications I am planning to run on my Raspberry Pi 4B homelab are:</p><ul><li><a href=https://miniflux.app/docs/installation.html>Miniflux</a> - RSS</li><li><a href=https://gitlab.com/py_crash/docker-libregrammar>Libregrammar</a> - LT fork</li><li><a href=https://github.com/wallabag/wallabag>Wallabag</a> - bookmark manager</li><li><a href=https://calibre-ebook.com/>calibre</a> - ebook manager</li><li><a href=https://tailscale.com/>Tailscale</a> - VPN</li></ul><p>A great place to discover programs to self host is <a href=https://github.com/awesome-selfhosted/awesome-selfhosted>awesome-selfhosted/awesome-selfhosted</a>. I&rsquo;ll be updating how I set up each of these as I learn how to do it!</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>I bought the metal case variant UGREEN 2.5" SATA Enclosure, with the phrase &ldquo;Protect What You Love!&rdquo; laser etched on the bottom right corner of the top plate. The USB cable is a Micro B to USB-A 3.0. There&rsquo;s more info from <a href=https://jamesachambers.com/best-ssd-storage-adapters-for-raspberry-pi-4-400/>James Chamber&rsquo;s page</a> on what external drives works well with the Raspberry Pi.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><h3>Posts in this series</h3><ul><li><a href=/posts/2023/dietpi-on-ssd/>Booting DietPi From SSD on a Raspberry Pi 4B 8GB</a></li></ul></div><div class=post__footer><span><a class=tag href=/tags/raspberry-pi/>raspberry pi</a><a class=tag href=/tags/dietpi/>dietpi</a><a class=tag href=/tags/networking/>networking</a></span></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
2023-2024 burgeonlab.com Naty S</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-R0EKGKLJYW"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-R0EKGKLJYW")</script><a href=#top-anchor><button class=top-anchor><i class="fa fa-chevron-circle-up" aria-hidden=true></i></button></a></body></html>